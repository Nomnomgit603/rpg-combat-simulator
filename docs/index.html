<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grid-Based RPG Simulator</title>
  <style>
    body {
      font-family: monospace;
      background: #111;
      color: #0f0;
      padding: 20px;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(20, 32px);
      grid-template-rows: repeat(10, 32px);
      gap: 1px;
      margin-bottom: 20px;
    }
    .tile {
      width: 32px;
      height: 32px;
      background: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #222;
    }
    .berserker img, .sniper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    button {
      margin-top: 10px;
      padding: 10px;
      background: #222;
      color: #0f0;
      border: 1px solid #0f0;
      cursor: pointer;
    }
  </style>
</head>
<body>
<h2>2D Grid RPG Simulator (Manual Movement with Keyboard + Character Tokens)</h2>
<div id="grid"></div>
<div>
  <label>Active Character:
    <select id="activeChar">
      <option value="berserker">Berserker</option>
      <option value="sniper">Sniper</option>
    </select>
  </label>
</div>

<script>
const gridWidth = 20;
const gridHeight = 10;
const gridEl = document.getElementById('grid');
const activeCharSel = document.getElementById('activeChar');

const berserkerIcon = 'https://raw.githubusercontent.com/Nomnomgit603/rpg-combat-simulator/main/docs/assets/berserker.png';
const sniperIcon = 'https://raw.githubusercontent.com/Nomnomgit603/rpg-combat-simulator/main/docs/assets/sniper.png';

let positions = {
  berserker: { x: 2, y: 5 },
  sniper: { x: 17, y: 5 }
};

function drawGrid() {
  gridEl.innerHTML = '';
  for (let y = 0; y < gridHeight; y++) {
    for (let x = 0; x < gridWidth; x++) {
      const tile = document.createElement('div');
      tile.classList.add('tile');

      if (positions.berserker.x === x && positions.berserker.y === y) {
        tile.classList.add('berserker');
        const img = document.createElement('img');
        img.src = berserkerIcon;
        tile.appendChild(img);
      } else if (positions.sniper.x === x && positions.sniper.y === y) {
        tile.classList.add('sniper');
        const img = document.createElement('img');
        img.src = sniperIcon;
        tile.appendChild(img);
      }

      gridEl.appendChild(tile);
    }
  }
}

function move(direction) {
  const char = activeCharSel.value;
  const pos = positions[char];
  if (direction === 'up' && pos.y > 0) pos.y--;
  if (direction === 'down' && pos.y < gridHeight - 1) pos.y++;
  if (direction === 'left' && pos.x > 0) pos.x--;
  if (direction === 'right' && pos.x < gridWidth - 1) pos.x++;
  drawGrid();
}

// Add keyboard input
window.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowUp') move('up');
  if (e.key === 'ArrowDown') move('down');
  if (e.key === 'ArrowLeft') move('left');
  if (e.key === 'ArrowRight') move('right');
});

// Initial draw
drawGrid();
</script>
</body>
</html>
